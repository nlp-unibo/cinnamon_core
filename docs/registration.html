

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Registration APIs &#8212; Cinnamon Core</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'registration';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Code Organization" href="dependencies.html" />
    <link rel="prev" title="Cinnamon Core Package" href="index.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  <div class="navbar-header-items__start">
    
      <div class="navbar-item">
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    <p class="title logo__title">Cinnamon Core</p>
  
</a></div>
    
  </div>
  
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="#">
                        Registration
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="dependencies.html">
                        Code Organization
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="configuration.html">
                        Configuration
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="component.html">
                        Component
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="data.html">
                        Data
                      </a>
                    </li>
                
            <div class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    More
                </button>
                <div class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="cinnamon_core.html">
                        cinnamon-core
                      </a>
                    </li>
                
                </div>
            </div>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar hide-on-wide">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="#">
                        Registration
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="dependencies.html">
                        Code Organization
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="configuration.html">
                        Configuration
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="component.html">
                        Component
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="data.html">
                        Data
                      </a>
                    </li>
                
            <div class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    More
                </button>
                <div class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="cinnamon_core.html">
                        cinnamon-core
                      </a>
                    </li>
                
                </div>
            </div>
            
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
        
      </div>
    
  </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumbs">
  <ul class="bd-breadcrumbs" role="navigation" aria-label="Breadcrumb">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page">Registration APIs</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="registration-apis">
<span id="registration"></span><h1>Registration APIs<a class="headerlink" href="#registration-apis" title="Permalink to this heading">#</a></h1>
<p>Let’s first recap the core concepts of <code class="docutils literal notranslate"><span class="pre">cinnamon</span></code>.</p>
<dl class="simple">
<dt><strong>Configuration</strong></dt><dd><p>defines all hyper-parameters and conditions of a Component</p>
</dd>
<dt><strong>Component</strong></dt><dd><p>defines a code logic</p>
</dd>
</dl>
<p>Cinnamon allows to quickly <strong>retrieve</strong>, <strong>build</strong> and <strong>re-use</strong> a <code class="docutils literal notranslate"><span class="pre">Component</span></code> via a set of registration APIs.</p>
<p>Consider our data loader recurring example.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Component</span>
<span class="k">class</span> <span class="nc">DataLoader</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="o">...</span><span class="p">):</span>
        <span class="o">...</span>

<span class="c1"># Configuration</span>
<span class="k">class</span> <span class="nc">DataLoaderConfig</span><span class="p">(</span><span class="n">Configuration</span><span class="p">):</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_default</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="n">config</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_default</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
        <span class="n">config</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;folder_name&#39;</span><span class="p">,</span>
                   <span class="n">type_hint</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
                   <span class="n">is_required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">config</span>
</pre></div>
</div>
<section id="registering-a-configuration">
<h2>Registering a Configuration<a class="headerlink" href="#registering-a-configuration" title="Permalink to this heading">#</a></h2>
<p>Suppose we have a &lt;<code class="docutils literal notranslate"><span class="pre">Configuration</span></code>, <code class="docutils literal notranslate"><span class="pre">Component</span></code>&gt; pair (e.g., &lt;<code class="docutils literal notranslate"><span class="pre">DataLoaderConfig</span></code>, <code class="docutils literal notranslate"><span class="pre">DataLoader</span></code>&gt;).</p>
<p>We first store the <code class="docutils literal notranslate"><span class="pre">Configuration</span></code> in the cinnamon’s <code class="docutils literal notranslate"><span class="pre">Registry</span></code> to memorize it.</p>
<p>We do so by defining a <code class="docutils literal notranslate"><span class="pre">RegistrationKey</span></code> to uniquely access to the <code class="docutils literal notranslate"><span class="pre">Configuration</span></code>.</p>
<a class="reference internal image-reference" href="_images/registration_with_key.png"><img alt="_images/registration_with_key.png" class="align-center" src="_images/registration_with_key.png" style="width: 1006.1999999999999px; height: 431.4px;" /></a>
<p>We register the <code class="docutils literal notranslate"><span class="pre">DataLoaderConfig</span></code> as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Registry</span><span class="o">.</span><span class="n">add_configuration</span><span class="p">(</span><span class="n">config_class</span><span class="o">=</span><span class="n">DataLoaderConfig</span><span class="p">,</span>
                           <span class="n">name</span><span class="o">=</span><span class="s1">&#39;data_loader&#39;</span>
                           <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;showcase&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Or, we can define the <code class="docutils literal notranslate"><span class="pre">RegistrationKey</span></code> explicitly</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">key</span> <span class="o">=</span> <span class="n">RegistrationKey</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;data_loader&#39;</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;showcase&#39;</span><span class="p">)</span>
<span class="n">Registry</span><span class="o">.</span><span class="n">add_configuration_from_key</span><span class="p">(</span><span class="n">config_class</span><span class="o">=</span><span class="n">DataLoaderConfig</span><span class="p">,</span>
                                    <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">)</span>
</pre></div>
</div>
<p>Once registered, we can always <strong>retrieve and build</strong> a <code class="docutils literal notranslate"><span class="pre">Configuration</span></code> from the <code class="docutils literal notranslate"><span class="pre">Registry</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">config</span> <span class="o">=</span> <span class="n">Registry</span><span class="o">.</span><span class="n">build_configuration</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;data_loader&#39;</span><span class="p">,</span>
                                      <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;showcase&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">key</span> <span class="o">=</span> <span class="n">RegistrationKey</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;data_loader&#39;</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;showcase&#39;</span><span class="p">)</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">Registry</span><span class="o">.</span><span class="n">build_configuration_from_key</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">)</span>
</pre></div>
</div>
<p>In particular, the <code class="docutils literal notranslate"><span class="pre">get_default()</span></code> method is invoked to build the <code class="docutils literal notranslate"><span class="pre">Configuration</span></code> instance.</p>
</section>
<section id="custom-configuration-instance-building">
<h2>Custom Configuration instance building<a class="headerlink" href="#custom-configuration-instance-building" title="Permalink to this heading">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">Configuration.get_default()</span></code> defines the general structure of a <code class="docutils literal notranslate"><span class="pre">Configuration</span></code> (see <a class="reference internal" href="configuration.html#configuration"><span class="std std-ref">Configuration</span></a> for more details).</p>
<p>What if we want to build a <code class="docutils literal notranslate"><span class="pre">Configuration</span></code> instance via a <strong>custom function</strong>?</p>
<p>Suppose the following <code class="docutils literal notranslate"><span class="pre">DataLoaderConfig</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Configuration</span>
<span class="k">class</span> <span class="nc">DataLoaderConfig</span><span class="p">(</span><span class="n">Configuration</span><span class="p">):</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_default</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="n">config</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_default</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
        <span class="n">config</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;folder_name&#39;</span><span class="p">,</span>
                   <span class="n">type_hint</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
                   <span class="n">is_required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">config</span>

   <span class="nd">@classmethod</span>
   <span class="k">def</span> <span class="nf">limited_samples_variant</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="n">config</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_default</span><span class="p">()</span>
        <span class="n">config</span><span class="o">.</span><span class="n">folder_name</span> <span class="o">=</span> <span class="s1">&#39;*folder_name&quot;&#39;</span>
        <span class="n">config</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;max_samples_amount&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">type_hint</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">config</span>
</pre></div>
</div>
<p>We want to register our <code class="docutils literal notranslate"><span class="pre">Configuration</span></code> such that its instances are built via the <code class="docutils literal notranslate"><span class="pre">limited_samples_variant()</span></code> method.</p>
<p>We do so by specifying the <code class="docutils literal notranslate"><span class="pre">DataLoaderConfig.limited_samples_variant</span></code> constructor method when registering the <code class="docutils literal notranslate"><span class="pre">DataLoaderConfig</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Registry</span><span class="o">.</span><span class="n">add_configuration</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;data_loader&#39;</span><span class="p">,</span>
                           <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;showcasing&#39;</span><span class="p">,</span>
                           <span class="n">config_constructor</span><span class="o">=</span><span class="n">DataLoaderConfig</span><span class="o">.</span><span class="n">limited_samples_variant</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="registration-key">
<h2>Registration Key<a class="headerlink" href="#registration-key" title="Permalink to this heading">#</a></h2>
<p>A <code class="docutils literal notranslate"><span class="pre">RegistrationKey</span></code> is a unique compound identifier that allows to quickly retrieve a <code class="docutils literal notranslate"><span class="pre">Configuration</span></code> from the
<code class="docutils literal notranslate"><span class="pre">Registry</span></code>.</p>
<p>In particular, a <code class="docutils literal notranslate"><span class="pre">RegistrationKey</span></code> consists of</p>
<ul class="simple">
<li><p><strong>name</strong>: a generic name to identify the type of configuration (and corresponding bound component, if any). For instance, ‘data_loader’ for a data loader.</p></li>
<li><p><strong>[Optional] tags</strong>: a set of string tags to identify the configuration. For instance, two data loaders will have the same name but different tags.</p></li>
<li><p><strong>namespace</strong>: the namespace to which the configuration belongs to. For instance, two configurations pointing to the same deep learning model, one written in Tensorflow and the other one in Pytorch, have the same name and tags but different namespace.</p></li>
</ul>
</section>
<section id="binding-a-configuration-to-a-component">
<h2>Binding a Configuration to a Component<a class="headerlink" href="#binding-a-configuration-to-a-component" title="Permalink to this heading">#</a></h2>
<p>Once we have registered our <code class="docutils literal notranslate"><span class="pre">Configuration</span></code>, we need to <strong>bind</strong> it to a <code class="docutils literal notranslate"><span class="pre">Component</span></code> to automatically build
<code class="docutils literal notranslate"><span class="pre">Component</span></code> instances.</p>
<p>We instruct the <code class="docutils literal notranslate"><span class="pre">Registry</span></code> to perform the binding operation by leveraging the <code class="docutils literal notranslate"><span class="pre">RegistrationKey</span></code> used to
store our <code class="docutils literal notranslate"><span class="pre">Configuration</span></code>.</p>
<a class="reference internal image-reference" href="_images/binding_with_key.png"><img alt="_images/binding_with_key.png" class="align-center" src="_images/binding_with_key.png" style="width: 1006.1999999999999px; height: 431.4px;" /></a>
<p>In our data loader example, we perform the binding between the registered <code class="docutils literal notranslate"><span class="pre">DataLoaderConfig</span></code> and <code class="docutils literal notranslate"><span class="pre">DataLoader</span></code> as follows</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Registry</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">component_class</span><span class="o">=</span><span class="n">DataLoader</span><span class="p">,</span>
              <span class="n">name</span><span class="o">=</span><span class="s1">&#39;data_loader&#39;</span><span class="p">,</span>
              <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;showcase&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">key</span> <span class="o">=</span> <span class="n">RegistrationKey</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;data_loader&#39;</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;showcase&#39;</span><span class="p">)</span>
<span class="n">Registry</span><span class="o">.</span><span class="n">bind_from_key</span><span class="p">(</span><span class="n">component_class</span><span class="o">=</span><span class="n">DataLoader</span><span class="p">,</span>
                       <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">Registry</span></code> offers the capability of performing the <strong>registration</strong> and <strong>binding</strong> operations in one step.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Registry</span><span class="o">.</span><span class="n">add_and_bind</span><span class="p">(</span><span class="n">config_class</span><span class="o">=</span><span class="n">DataLoaderConfig</span><span class="p">,</span>
                      <span class="n">component_class</span><span class="o">=</span><span class="n">DataLoader</span><span class="p">,</span>
                      <span class="n">name</span><span class="o">=</span><span class="s1">&#39;data_loader&#39;</span><span class="p">,</span>
                      <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;showcase&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>If the <code class="docutils literal notranslate"><span class="pre">DataLoaderConfig</span></code> has some hyper-parameter variants to take into account, we can register them as well</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Registry</span><span class="o">.</span><span class="n">add_and_bind_variants</span><span class="p">(</span><span class="n">config_class</span><span class="o">=</span><span class="n">DataLoaderConfig</span><span class="p">,</span>
                               <span class="n">component_class</span><span class="o">=</span><span class="n">DataLoader</span><span class="p">,</span>
                               <span class="n">name</span><span class="o">=</span><span class="s1">&#39;data_loader&#39;</span><span class="p">,</span>
                               <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;showcase&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="building-a-component">
<h2>Building a Component<a class="headerlink" href="#building-a-component" title="Permalink to this heading">#</a></h2>
<p>Once a <code class="docutils literal notranslate"><span class="pre">Configuration</span></code> is bound to a <code class="docutils literal notranslate"><span class="pre">Component</span></code>, the <code class="docutils literal notranslate"><span class="pre">Registry</span></code> can automatically build a <code class="docutils literal notranslate"><span class="pre">Component</span></code> instance
by using the associated <code class="docutils literal notranslate"><span class="pre">RegistrationKey</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data_loader</span> <span class="o">=</span> <span class="n">Registry</span><span class="o">.</span><span class="n">build_component</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;data_loader&#39;</span><span class="p">,</span>
                                       <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;showcasing&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">key</span> <span class="o">=</span> <span class="n">RegistrationKey</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;data_loader&#39;</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;showcasing&#39;</span><span class="p">)</span>
<span class="n">data_loader</span> <span class="o">=</span> <span class="n">Registry</span><span class="o">.</span><span class="n">build_component_from_key</span><span class="p">(</span><span class="n">registration_key</span><span class="o">=</span><span class="n">key</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Registry</span></code> deals with <code class="docutils literal notranslate"><span class="pre">Configuration</span></code> and <code class="docutils literal notranslate"><span class="pre">Component</span></code> <strong>classes</strong> and <strong>not</strong> class instances.
Classes are stored as ‘’factories’’ for building class instances on-the-fly.</p>
</div>
</section>
<section id="retrieving-a-component">
<h2>Retrieving a Component<a class="headerlink" href="#retrieving-a-component" title="Permalink to this heading">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">Registry</span></code> can also retrieve the <code class="docutils literal notranslate"><span class="pre">Component</span></code> class instead of building an instance</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">component_class</span> <span class="o">=</span> <span class="n">Registry</span><span class="o">.</span><span class="n">retrieve_component</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;data_loader&#39;</span><span class="p">,</span>
                                              <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;showcasing&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">key</span> <span class="o">=</span> <span class="n">RegistrationKey</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;data_loader&#39;</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;showcasing&#39;</span><span class="p">)</span>
<span class="n">component_class</span> <span class="o">=</span> <span class="n">Registry</span><span class="o">.</span><span class="n">retrieve_component_from_key</span><span class="p">(</span><span class="n">registration_key</span><span class="o">=</span><span class="n">key</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="registering-and-retrieving-a-component-instance">
<h2>Registering and retrieving a Component instance<a class="headerlink" href="#registering-and-retrieving-a-component-instance" title="Permalink to this heading">#</a></h2>
<p>A <code class="docutils literal notranslate"><span class="pre">Component</span></code> instance can be registered as well via a <code class="docutils literal notranslate"><span class="pre">RegistrationKey</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The same <code class="docutils literal notranslate"><span class="pre">RegistrationKey</span></code> used to bind the <code class="docutils literal notranslate"><span class="pre">Component</span></code> can be used as well.</p>
</div>
<p>Such a functionality is particularly useful to have access to a <code class="docutils literal notranslate"><span class="pre">Component</span></code> instance anywhere in the code.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Registry</span><span class="o">.</span><span class="n">register_component_instance</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;data_loader&#39;</span><span class="p">,</span>
                                     <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;showcasing&#39;</span><span class="p">,</span>
                                     <span class="n">component</span><span class="o">=</span><span class="n">component</span><span class="p">)</span>           <span class="c1"># instantiated somewhere</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">key</span> <span class="o">=</span> <span class="n">RegistrationKey</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;data_loader&#39;</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;showcasing&#39;</span><span class="p">)</span>
<span class="n">Registry</span><span class="o">.</span><span class="n">register_component_instance_from_key</span><span class="p">(</span><span class="n">registration_key</span><span class="o">=</span><span class="n">key</span>
                                              <span class="n">component</span><span class="o">=</span><span class="n">component</span><span class="p">)</span>
</pre></div>
</div>
<p>Additionally, we can directly register the <code class="docutils literal notranslate"><span class="pre">Component</span></code> instance when building it.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">component</span> <span class="o">=</span> <span class="n">Registry</span><span class="o">.</span><span class="n">build_component</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;data_loader&#39;</span><span class="p">,</span>
                                     <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;showcasing&#39;</span><span class="p">,</span>
                                     <span class="n">register_component_instance</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Once registered, we can always retrieve the <code class="docutils literal notranslate"><span class="pre">Component</span></code> instance via the associated <code class="docutils literal notranslate"><span class="pre">RegistrationKey</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">component</span> <span class="o">=</span> <span class="n">Registry</span><span class="o">.</span><span class="n">retrieve_component_instance</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;data_loader&#39;</span><span class="p">,</span>
                                                 <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;showcasing&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">key</span> <span class="o">=</span> <span class="n">RegistrationKey</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;data_loader&#39;</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;showcasing&#39;</span><span class="p">)</span>
<span class="n">component</span> <span class="o">=</span> <span class="n">Registry</span><span class="o">.</span><span class="n">retrieve_component_instance_from_key</span><span class="p">(</span><span class="n">registration_key</span><span class="o">=</span><span class="n">key</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="empty-configuration">
<h2>Empty Configuration<a class="headerlink" href="#empty-configuration" title="Permalink to this heading">#</a></h2>
<p>In some cases, a <code class="docutils literal notranslate"><span class="pre">Component</span></code> may not have any hyper-parameters.</p>
<p>We can use the <code class="docutils literal notranslate"><span class="pre">Configuration</span></code> class to bind an empty <code class="docutils literal notranslate"><span class="pre">Configuration</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Registry</span><span class="o">.</span><span class="n">add_and_bind</span><span class="p">(</span><span class="n">config_class</span><span class="o">=</span><span class="n">Configuration</span><span class="p">,</span>
                      <span class="n">component_class</span><span class="o">=</span><span class="n">DataLoader</span><span class="p">,</span>
                      <span class="n">name</span><span class="o">=</span><span class="s1">&#39;data_loader&#39;</span><span class="p">,</span>
                      <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;showcasing&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="tl-dr-too-long-didn-t-read">
<h2>Tl;dr (Too long; didn’t read)<a class="headerlink" href="#tl-dr-too-long-didn-t-read" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>Define your <code class="docutils literal notranslate"><span class="pre">Component</span></code> (code logic).</p></li>
<li><p>Define its corresponding <code class="docutils literal notranslate"><span class="pre">Configuration</span></code> (one or more).</p></li>
<li><p>Register the <code class="docutils literal notranslate"><span class="pre">Configuration</span></code> to the <code class="docutils literal notranslate"><span class="pre">Registry</span></code> via a <code class="docutils literal notranslate"><span class="pre">RegistrationKey</span></code>.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">RegistrationKey</span></code> is a compound string-based unique identifier.</p></li>
<li><p>Bind the <code class="docutils literal notranslate"><span class="pre">Configuration</span></code> to its <code class="docutils literal notranslate"><span class="pre">Component</span></code> via the <code class="docutils literal notranslate"><span class="pre">RegistrationKey</span></code>.</p></li>
<li><p>Build <code class="docutils literal notranslate"><span class="pre">Component</span></code> instances via the <code class="docutils literal notranslate"><span class="pre">RegistrationKey</span></code>.</p></li>
</ul>
<p><strong>Congrats! This is 99% of cinnamon!</strong></p>
</section>
<section id="how-to-use-registration-apis">
<h2>How to use registration APIs<a class="headerlink" href="#how-to-use-registration-apis" title="Permalink to this heading">#</a></h2>
<p>You may be wondering <strong>how</strong> to properly use these registration APIs…</p>
<p>Long story short, you <strong>don’t need</strong> to contaminate your code with registration and binding operations.</p>
<p>Cinnamon supports a <strong>specific code organization</strong> to <strong>automatically</strong> address all registration related operations while keeping a clean code organization.</p>
<p>See <a class="reference internal" href="dependencies.html"><span class="doc">Code Organization</span></a> for more details.</p>
</section>
</section>


                </article>
              
              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="index.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Cinnamon Core Package</p>
      </div>
    </a>
    <a class="right-next"
       href="dependencies.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Code Organization</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#registering-a-configuration">Registering a Configuration</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#custom-configuration-instance-building">Custom Configuration instance building</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#registration-key">Registration Key</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#binding-a-configuration-to-a-component">Binding a Configuration to a Component</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#building-a-component">Building a Component</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#retrieving-a-component">Retrieving a Component</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#registering-and-retrieving-a-component-instance">Registering and retrieving a Component instance</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#empty-configuration">Empty Configuration</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tl-dr-too-long-didn-t-read">Tl;dr (Too long; didn’t read)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#how-to-use-registration-apis">How to use registration APIs</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div class="tocsection sourcelink">
    <a href="_sources/registration.rst.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">
  <p class="copyright">
    
      © Copyright 2023, Federico Ruggeri.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">
  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    <br/>
  </p>
</div>
      
    </div>
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.13.3.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>