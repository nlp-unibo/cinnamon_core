


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xml:lang="" lang="" version="-//W3C//DTD XHTML 1.1//EN" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="">
    <link rel="icon" type="image/x-icon" href="">

  
  <title>Registration APIs &mdash; cinnamon-core 0.1 documentation</title>
  

  

  

    <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'/>


  <link rel="stylesheet" href="_static/css/img.css" type="text/css"/>
  
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  
    <link rel="stylesheet" href="_static/css/pdj.css" type="text/css" />
  

  

  <link rel="stylesheet" href="_static/css/darker.css" type="text/css" media="(prefers-color-scheme: dark)"/>
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="cinnamon-core 0.1 documentation" href="index.html"/>
        <link rel="next" title="Code Organization" href="dependencies.html"/>
        <link rel="prev" title="Cinnamon Core Package" href="index.html"/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="cache-control" content="public" />
    <meta name="robots" content="follow, all" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Add jQuery library -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-latest.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>
    <script type="module" src="https://googlechromelabs.github.io/dark-mode-toggle/src/dark-mode-toggle.mjs"></script>

  </head>

  <body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
	
        <a href="index.html" class="fa fa-home"> cinnamon-core </a>
	
	
        <div role="search">
	  
	  <form id ="rtd-search-form" class="wy-form"
		action="search.html" method="get">
	    <input type="text" name="q" placeholder="Search docs" />
	    <input type="hidden" name="check_keywords" value="yes" />
	    <input type="hidden" name="area" value="default" />
	  </form>
	  
	</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	
          
          
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Registration</a></li>
<li class="toctree-l1"><a class="reference internal" href="dependencies.html">Code Organization</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="component.html">Component</a></li>
<li class="toctree-l1"><a class="reference internal" href="data.html">Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="cinnamon_core.html">cinnamon-core</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cinnamon_core.core.html">cinnamon_core.core package</a></li>
<li class="toctree-l2"><a class="reference internal" href="cinnamon_core.utility.html">cinnamon_core.utility package</a></li>
</ul>
</li>
</ul>

          
        

      </div>
      &nbsp;
    </nav>
    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      <nav class="wy-nav-top" id="barra-mobile" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="#">cinnamon-core </a>
      </nav>

      <div class="wy-nav-content">
	<div class="fundo-claro">
	</div>
	<div class="fundo-escuro">
	</div>

        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
	    
	    <!-- <ul class="wy-breadcrumbs"> -->
	    <!--   <li><a href="#">Docs</a> &raquo;</li> -->

	    <!--   <li>Features</li> -->
	    <!--   <li class="wy-breadcrumbs-aside"> -->

	    <!-- 	<a href="_sources/index.txt" rel="nofollow"> View page source</a> -->

	    <!--   </li> -->
	    <!-- </ul> -->
	    <!-- <hr/> -->
	  </div>
          <div role="main" class="">

	    <div id="content" class="hfeed entry-container hentry">
      	<div id="dark-mode-toggle-container">
	  <dark-mode-toggle appearance="toggle" dark="switch to light mode" light="switch to dark mode">
	  </dark-mode-toggle>
	</div>
  <section id="registration-apis">
<span id="registration"></span><h1>Registration APIs<a class="headerlink" href="#registration-apis" title="Permalink to this heading">¶</a></h1>
<p>Let’s first recap the core concepts of <code class="docutils literal notranslate"><span class="pre">cinnamon</span></code>.</p>
<dl class="simple">
<dt><strong>Configuration</strong></dt><dd><p>defines all hyper-parameters and conditions of a Component</p>
</dd>
<dt><strong>Component</strong></dt><dd><p>defines a code logic</p>
</dd>
</dl>
<p>Cinnamon allows to quickly <strong>retrieve</strong>, <strong>build</strong> and <strong>re-use</strong> a <code class="docutils literal notranslate"><span class="pre">Component</span></code> via a set of registration APIs.</p>
<p>Consider our data loader recurring example.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Component</span>
<span class="k">class</span> <span class="nc">DataLoader</span><span class="p">(</span><span class="n">Component</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="o">...</span><span class="p">):</span>
        <span class="o">...</span>

<span class="c1"># Configuration</span>
<span class="k">class</span> <span class="nc">DataLoaderConfig</span><span class="p">(</span><span class="n">Configuration</span><span class="p">):</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_default</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="n">config</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_default</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
        <span class="n">config</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;folder_name&#39;</span><span class="p">,</span>
                   <span class="n">type_hint</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
                   <span class="n">is_required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">config</span>
</pre></div>
</div>
<section id="registering-a-configuration">
<h2>Registering a Configuration<a class="headerlink" href="#registering-a-configuration" title="Permalink to this heading">¶</a></h2>
<p>Suppose we have a &lt;<code class="docutils literal notranslate"><span class="pre">Configuration</span></code>, <code class="docutils literal notranslate"><span class="pre">Component</span></code>&gt; pair (e.g., &lt;<code class="docutils literal notranslate"><span class="pre">DataLoaderConfig</span></code>, <code class="docutils literal notranslate"><span class="pre">DataLoader</span></code>&gt;).</p>
<p>We first store the <code class="docutils literal notranslate"><span class="pre">Configuration</span></code> in the cinnamon’s <code class="docutils literal notranslate"><span class="pre">Registry</span></code> to memorize it.</p>
<p>We do so by defining a <code class="docutils literal notranslate"><span class="pre">RegistrationKey</span></code> to uniquely access to the <code class="docutils literal notranslate"><span class="pre">Configuration</span></code>.</p>
<a class="reference internal image-reference" href="_images/registration_with_key.png"><img alt="_images/registration_with_key.png" class="align-center" src="_images/registration_with_key.png" style="width: 1006.1999999999999px; height: 431.4px;" /></a>
<p>We register the <code class="docutils literal notranslate"><span class="pre">DataLoaderConfig</span></code> as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Registry</span><span class="o">.</span><span class="n">add_configuration</span><span class="p">(</span><span class="n">config_class</span><span class="o">=</span><span class="n">DataLoaderConfig</span><span class="p">,</span>
                           <span class="n">name</span><span class="o">=</span><span class="s1">&#39;data_loader&#39;</span>
                           <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;showcase&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Or, we can define the <code class="docutils literal notranslate"><span class="pre">RegistrationKey</span></code> explicitly</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">key</span> <span class="o">=</span> <span class="n">RegistrationKey</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;data_loader&#39;</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;showcase&#39;</span><span class="p">)</span>
<span class="n">Registry</span><span class="o">.</span><span class="n">add_configuration_from_key</span><span class="p">(</span><span class="n">config_class</span><span class="o">=</span><span class="n">DataLoaderConfig</span><span class="p">,</span>
                                    <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">)</span>
</pre></div>
</div>
<p>Once registered, we can always <strong>retrieve and build</strong> a <code class="docutils literal notranslate"><span class="pre">Configuration</span></code> from the <code class="docutils literal notranslate"><span class="pre">Registry</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">config</span> <span class="o">=</span> <span class="n">Registry</span><span class="o">.</span><span class="n">build_configuration</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;data_loader&#39;</span><span class="p">,</span>
                                      <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;showcase&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">key</span> <span class="o">=</span> <span class="n">RegistrationKey</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;data_loader&#39;</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;showcase&#39;</span><span class="p">)</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">Registry</span><span class="o">.</span><span class="n">build_configuration_from_key</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">)</span>
</pre></div>
</div>
<p>In particular, the <code class="docutils literal notranslate"><span class="pre">get_default()</span></code> method is invoked to build the <code class="docutils literal notranslate"><span class="pre">Configuration</span></code> instance.</p>
</section>
<section id="custom-configuration-instance-building">
<h2>Custom Configuration instance building<a class="headerlink" href="#custom-configuration-instance-building" title="Permalink to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">Configuration.get_default()</span></code> defines the general structure of a <code class="docutils literal notranslate"><span class="pre">Configuration</span></code> (see <a class="reference internal" href="configuration.html#configuration"><span class="std std-ref">Configuration</span></a> for more details).</p>
<p>What if we want to build a <code class="docutils literal notranslate"><span class="pre">Configuration</span></code> instance via a <strong>custom function</strong>?</p>
<p>Suppose the following <code class="docutils literal notranslate"><span class="pre">DataLoaderConfig</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Configuration</span>
<span class="k">class</span> <span class="nc">DataLoaderConfig</span><span class="p">(</span><span class="n">Configuration</span><span class="p">):</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_default</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="n">config</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_default</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
        <span class="n">config</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;folder_name&#39;</span><span class="p">,</span>
                   <span class="n">type_hint</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
                   <span class="n">is_required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">config</span>

   <span class="nd">@classmethod</span>
   <span class="k">def</span> <span class="nf">limited_samples_variant</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="n">config</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_default</span><span class="p">()</span>
        <span class="n">config</span><span class="o">.</span><span class="n">folder_name</span> <span class="o">=</span> <span class="s1">&#39;*folder_name&quot;&#39;</span>
        <span class="n">config</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;max_samples_amount&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">type_hint</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">config</span>
</pre></div>
</div>
<p>We want to register our <code class="docutils literal notranslate"><span class="pre">Configuration</span></code> such that its instances are built via the <code class="docutils literal notranslate"><span class="pre">limited_samples_variant()</span></code> method.</p>
<p>We do so by specifying the <code class="docutils literal notranslate"><span class="pre">DataLoaderConfig.limited_samples_variant</span></code> constructor method when registering the <code class="docutils literal notranslate"><span class="pre">DataLoaderConfig</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Registry</span><span class="o">.</span><span class="n">add_configuration</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;data_loader&#39;</span><span class="p">,</span>
                           <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;showcasing&#39;</span><span class="p">,</span>
                           <span class="n">config_constructor</span><span class="o">=</span><span class="n">DataLoaderConfig</span><span class="o">.</span><span class="n">limited_samples_variant</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="registration-key">
<h2>Registration Key<a class="headerlink" href="#registration-key" title="Permalink to this heading">¶</a></h2>
<p>A <code class="docutils literal notranslate"><span class="pre">RegistrationKey</span></code> is a unique compound identifier that allows to quickly retrieve a <code class="docutils literal notranslate"><span class="pre">Configuration</span></code> from the
<code class="docutils literal notranslate"><span class="pre">Registry</span></code>.</p>
<p>In particular, a <code class="docutils literal notranslate"><span class="pre">RegistrationKey</span></code> consists of</p>
<ul class="simple">
<li><p><strong>name</strong>: a generic name to identify the type of configuration (and corresponding bound component, if any). For instance, ‘data_loader’ for a data loader.</p></li>
<li><p><strong>[Optional] tags</strong>: a set of string tags to identify the configuration. For instance, two data loaders will have the same name but different tags.</p></li>
<li><p><strong>namespace</strong>: the namespace to which the configuration belongs to. For instance, two configurations pointing to the same deep learning model, one written in Tensorflow and the other one in Pytorch, have the same name and tags but different namespace.</p></li>
</ul>
</section>
<section id="binding-a-configuration-to-a-component">
<h2>Binding a Configuration to a Component<a class="headerlink" href="#binding-a-configuration-to-a-component" title="Permalink to this heading">¶</a></h2>
<p>Once we have registered our <code class="docutils literal notranslate"><span class="pre">Configuration</span></code>, we need to <strong>bind</strong> it to a <code class="docutils literal notranslate"><span class="pre">Component</span></code> to automatically build
<code class="docutils literal notranslate"><span class="pre">Component</span></code> instances.</p>
<p>We instruct the <code class="docutils literal notranslate"><span class="pre">Registry</span></code> to perform the binding operation by leveraging the <code class="docutils literal notranslate"><span class="pre">RegistrationKey</span></code> used to
store our <code class="docutils literal notranslate"><span class="pre">Configuration</span></code>.</p>
<a class="reference internal image-reference" href="_images/binding_with_key.png"><img alt="_images/binding_with_key.png" class="align-center" src="_images/binding_with_key.png" style="width: 1006.1999999999999px; height: 431.4px;" /></a>
<p>In our data loader example, we perform the binding between the registered <code class="docutils literal notranslate"><span class="pre">DataLoaderConfig</span></code> and <code class="docutils literal notranslate"><span class="pre">DataLoader</span></code> as follows</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Registry</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">component_class</span><span class="o">=</span><span class="n">DataLoader</span><span class="p">,</span>
              <span class="n">name</span><span class="o">=</span><span class="s1">&#39;data_loader&#39;</span><span class="p">,</span>
              <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;showcase&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">key</span> <span class="o">=</span> <span class="n">RegistrationKey</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;data_loader&#39;</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;showcase&#39;</span><span class="p">)</span>
<span class="n">Registry</span><span class="o">.</span><span class="n">bind_from_key</span><span class="p">(</span><span class="n">component_class</span><span class="o">=</span><span class="n">DataLoader</span><span class="p">,</span>
                       <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">Registry</span></code> offers the capability of performing the <strong>registration</strong> and <strong>binding</strong> operations in one step.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Registry</span><span class="o">.</span><span class="n">add_and_bind</span><span class="p">(</span><span class="n">config_class</span><span class="o">=</span><span class="n">DataLoaderConfig</span><span class="p">,</span>
                      <span class="n">component_class</span><span class="o">=</span><span class="n">DataLoader</span><span class="p">,</span>
                      <span class="n">name</span><span class="o">=</span><span class="s1">&#39;data_loader&#39;</span><span class="p">,</span>
                      <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;showcase&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>If the <code class="docutils literal notranslate"><span class="pre">DataLoaderConfig</span></code> has some hyper-parameter variants to take into account, we can register them as well</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Registry</span><span class="o">.</span><span class="n">add_and_bind_variants</span><span class="p">(</span><span class="n">config_class</span><span class="o">=</span><span class="n">DataLoaderConfig</span><span class="p">,</span>
                               <span class="n">component_class</span><span class="o">=</span><span class="n">DataLoader</span><span class="p">,</span>
                               <span class="n">name</span><span class="o">=</span><span class="s1">&#39;data_loader&#39;</span><span class="p">,</span>
                               <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;showcase&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="building-a-component">
<h2>Building a Component<a class="headerlink" href="#building-a-component" title="Permalink to this heading">¶</a></h2>
<p>Once a <code class="docutils literal notranslate"><span class="pre">Configuration</span></code> is bound to a <code class="docutils literal notranslate"><span class="pre">Component</span></code>, the <code class="docutils literal notranslate"><span class="pre">Registry</span></code> can automatically build a <code class="docutils literal notranslate"><span class="pre">Component</span></code> instance
by using the associated <code class="docutils literal notranslate"><span class="pre">RegistrationKey</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data_loader</span> <span class="o">=</span> <span class="n">Registry</span><span class="o">.</span><span class="n">build_component</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;data_loader&#39;</span><span class="p">,</span>
                                       <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;showcasing&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">key</span> <span class="o">=</span> <span class="n">RegistrationKey</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;data_loader&#39;</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;showcasing&#39;</span><span class="p">)</span>
<span class="n">data_loader</span> <span class="o">=</span> <span class="n">Registry</span><span class="o">.</span><span class="n">build_component_from_key</span><span class="p">(</span><span class="n">registration_key</span><span class="o">=</span><span class="n">key</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Registry</span></code> deals with <code class="docutils literal notranslate"><span class="pre">Configuration</span></code> and <code class="docutils literal notranslate"><span class="pre">Component</span></code> <strong>classes</strong> and <strong>not</strong> class instances.
Classes are stored as ‘’factories’’ for building class instances on-the-fly.</p>
</div>
</section>
<section id="retrieving-a-component">
<h2>Retrieving a Component<a class="headerlink" href="#retrieving-a-component" title="Permalink to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">Registry</span></code> can also retrieve the <code class="docutils literal notranslate"><span class="pre">Component</span></code> class instead of building an instance</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">component_class</span> <span class="o">=</span> <span class="n">Registry</span><span class="o">.</span><span class="n">retrieve_component</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;data_loader&#39;</span><span class="p">,</span>
                                              <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;showcasing&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">key</span> <span class="o">=</span> <span class="n">RegistrationKey</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;data_loader&#39;</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;showcasing&#39;</span><span class="p">)</span>
<span class="n">component_class</span> <span class="o">=</span> <span class="n">Registry</span><span class="o">.</span><span class="n">retrieve_component_from_key</span><span class="p">(</span><span class="n">registration_key</span><span class="o">=</span><span class="n">key</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="registering-and-retrieving-a-component-instance">
<h2>Registering and retrieving a Component instance<a class="headerlink" href="#registering-and-retrieving-a-component-instance" title="Permalink to this heading">¶</a></h2>
<p>A <code class="docutils literal notranslate"><span class="pre">Component</span></code> instance can be registered as well via a <code class="docutils literal notranslate"><span class="pre">RegistrationKey</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The same <code class="docutils literal notranslate"><span class="pre">RegistrationKey</span></code> used to bind the <code class="docutils literal notranslate"><span class="pre">Component</span></code> can be used as well.</p>
</div>
<p>Such a functionality is particularly useful to have access to a <code class="docutils literal notranslate"><span class="pre">Component</span></code> instance anywhere in the code.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Registry</span><span class="o">.</span><span class="n">register_component_instance</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;data_loader&#39;</span><span class="p">,</span>
                                     <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;showcasing&#39;</span><span class="p">,</span>
                                     <span class="n">component</span><span class="o">=</span><span class="n">component</span><span class="p">)</span>           <span class="c1"># instantiated somewhere</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">key</span> <span class="o">=</span> <span class="n">RegistrationKey</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;data_loader&#39;</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;showcasing&#39;</span><span class="p">)</span>
<span class="n">Registry</span><span class="o">.</span><span class="n">register_component_instance_from_key</span><span class="p">(</span><span class="n">registration_key</span><span class="o">=</span><span class="n">key</span>
                                              <span class="n">component</span><span class="o">=</span><span class="n">component</span><span class="p">)</span>
</pre></div>
</div>
<p>Additionally, we can directly register the <code class="docutils literal notranslate"><span class="pre">Component</span></code> instance when building it.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">component</span> <span class="o">=</span> <span class="n">Registry</span><span class="o">.</span><span class="n">build_component</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;data_loader&#39;</span><span class="p">,</span>
                                     <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;showcasing&#39;</span><span class="p">,</span>
                                     <span class="n">register_component_instance</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Once registered, we can always retrieve the <code class="docutils literal notranslate"><span class="pre">Component</span></code> instance via the associated <code class="docutils literal notranslate"><span class="pre">RegistrationKey</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">component</span> <span class="o">=</span> <span class="n">Registry</span><span class="o">.</span><span class="n">retrieve_component_instance</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;data_loader&#39;</span><span class="p">,</span>
                                                 <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;showcasing&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">key</span> <span class="o">=</span> <span class="n">RegistrationKey</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;data_loader&#39;</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;showcasing&#39;</span><span class="p">)</span>
<span class="n">component</span> <span class="o">=</span> <span class="n">Registry</span><span class="o">.</span><span class="n">retrieve_component_instance_from_key</span><span class="p">(</span><span class="n">registration_key</span><span class="o">=</span><span class="n">key</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="empty-configuration">
<h2>Empty Configuration<a class="headerlink" href="#empty-configuration" title="Permalink to this heading">¶</a></h2>
<p>In some cases, a <code class="docutils literal notranslate"><span class="pre">Component</span></code> may not have any hyper-parameters.</p>
<p>We can use the <code class="docutils literal notranslate"><span class="pre">Configuration</span></code> class to bind an empty <code class="docutils literal notranslate"><span class="pre">Configuration</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Registry</span><span class="o">.</span><span class="n">add_and_bind</span><span class="p">(</span><span class="n">config_class</span><span class="o">=</span><span class="n">Configuration</span><span class="p">,</span>
                      <span class="n">component_class</span><span class="o">=</span><span class="n">DataLoader</span><span class="p">,</span>
                      <span class="n">name</span><span class="o">=</span><span class="s1">&#39;data_loader&#39;</span><span class="p">,</span>
                      <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;showcasing&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="tl-dr-too-long-didn-t-read">
<h2>Tl;dr (Too long; didn’t read)<a class="headerlink" href="#tl-dr-too-long-didn-t-read" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>Define your <code class="docutils literal notranslate"><span class="pre">Component</span></code> (code logic).</p></li>
<li><p>Define its corresponding <code class="docutils literal notranslate"><span class="pre">Configuration</span></code> (one or more).</p></li>
<li><p>Register the <code class="docutils literal notranslate"><span class="pre">Configuration</span></code> to the <code class="docutils literal notranslate"><span class="pre">Registry</span></code> via a <code class="docutils literal notranslate"><span class="pre">RegistrationKey</span></code>.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">RegistrationKey</span></code> is a compound string-based unique identifier.</p></li>
<li><p>Bind the <code class="docutils literal notranslate"><span class="pre">Configuration</span></code> to its <code class="docutils literal notranslate"><span class="pre">Component</span></code> via the <code class="docutils literal notranslate"><span class="pre">RegistrationKey</span></code>.</p></li>
<li><p>Build <code class="docutils literal notranslate"><span class="pre">Component</span></code> instances via the <code class="docutils literal notranslate"><span class="pre">RegistrationKey</span></code>.</p></li>
</ul>
<p><strong>Congrats! This is 99% of cinnamon!</strong></p>
</section>
<section id="how-to-use-registration-apis">
<h2>How to use registration APIs<a class="headerlink" href="#how-to-use-registration-apis" title="Permalink to this heading">¶</a></h2>
<p>You may be wondering <strong>how</strong> to properly use these registration APIs…</p>
<p>Long story short, you <strong>don’t need</strong> to contaminate your code with registration and binding operations.</p>
<p>Cinnamon supports a <strong>specific code organization</strong> to <strong>automatically</strong> address all registration related operations while keeping a clean code organization.</p>
<p>See <a class="reference internal" href="dependencies.html"><span class="doc">Code Organization</span></a> for more details.</p>
</section>
</section>


	    </div>
            <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="dependencies.html" class="btn btn-neutral float-right" title="Code Organization">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Cinnamon Core Package"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2023, Federico Ruggeri.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/jucacrispim/sphinx_pdj_theme">theme</a> provided by <a href="https://poraodojuca.dev">Porão do Juca</a>.

</footer>
	</div>
	</div>
	  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
    <script type="text/javascript" src="_static/documentation_options.js">

    </script>
    <script type="text/javascript" src="_static/jquery.js">

    </script>
    <script type="text/javascript" src="_static/underscore.js">

    </script>
    <script type="text/javascript" src="_static/_sphinx_javascript_frameworks_compat.js">

    </script>
    <script type="text/javascript" src="_static/doctools.js">

    </script>
    <script type="text/javascript" src="_static/sphinx_highlight.js">

    </script>

  

   <script type="text/javascript"
           src="_static/js/theme.js"></script>

   <script type="text/javascript"
           src="_static/js/pdj.js"></script>

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

  </body>
</html>